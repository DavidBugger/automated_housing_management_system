<!DOCTYPE html>
<html>
<head>
    <title>Payment Successful</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Show SweetAlert after the page loads
            Swal.fire({
                icon: "success",
                title: "Payment Successful",
                text: "Your payment was successful! You can now download your receipt.",
                confirmButtonText: "Download Receipt"
            }).then(() => {
                // Redirect to the receipt page and trigger download
                const receiptUrl = "{{ receipt_url }}";  // Pass the receipt URL from the backend
                window.location.href = receiptUrl;

                // Automatically trigger download
                const link = document.createElement("a");
                link.href = receiptUrl;
                link.download = "receipt_{{ transaction_reference }}.pdf";  // Use the transaction reference for the filename
                link.click();
            });
             // Automatically reload the page after 5 seconds
             setTimeout(() => {
                window.location.href = "http://127.0.0.1:8000/";
            }, 6000);
        });
    </script>
</body>
</html>